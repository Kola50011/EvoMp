/*!
 * <!--
 * Evolution Multiplayer CONFIDENTIAL
 * Copyright (c) 2016-2017 Evolution Multiplayer, All Rights Reserved.
 * 
 * NOTICE:  All information contained herein is, and remains the property of Evolution Multiplayer. The intellectual and technical concepts contained
 * herein are proprietary to Evolution Multiplayer.
 * Dissemination of this information or reproduction of this material is strictly forbidden unless prior written permission is obtained
 * from Evolution Multiplayer. Access to the source code contained herein is hereby forbidden to anyone except current Evolution Multiplayer employees, managers or contractors who have executed
 * Confidentiality and Non-disclosure agreements explicitly covering such access.
 * 
 * The copyright notice above does not evidence any actual or intended publication or disclosure  of  this source code, which includes
 * information that is confidential and/or proprietary, and is a trade secret, of  Evolution Multiplayer.   ANY REPRODUCTION, MODIFICATION, DISTRIBUTION, PUBLIC  PERFORMANCE,
 * OR PUBLIC DISPLAY OF OR THROUGH USE  OF THIS  SOURCE CODE  WITHOUT  THE EXPRESS WRITTEN CONSENT OF COMPANY IS STRICTLY PROHIBITED, AND IN VIOLATION OF APPLICABLE
 * LAWS AND INTERNATIONAL TREATIES.  THE RECEIPT OR POSSESSION OF  THIS SOURCE CODE AND/OR RELATED INFORMATION DOES NOT CONVEY OR IMPLY ANY RIGHTS
 * TO REPRODUCE, DISCLOSE OR DISTRIBUTE ITS CONTENTS, OR TO MANUFACTURE, USE, OR SELL ANYTHING THAT IT  MAY DESCRIBE, IN WHOLE OR IN PART.
 * -->
 * 
 */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Cef",function(){return c});var r=n(4),i=n(5),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,c)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,c,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},c=function(){function e(e,t){this.cursor=!1,this.open=!1,this.external=!1,this.headless=!1,this.cefEventHandler=r.CefEventHandlerSingleton.getInstance(),this.chat=!1,this.hud=!0,this.name=e,this.path=t;var n=API.getScreenResolution();this.browser=API.createCefBrowser(n.Width,n.Height,!this.external),API.setCefBrowserPosition(this.browser,0,0),API.waitUntilCefBrowserInit(this.browser)}return e.prototype.load=function(e){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e&&(this.path=e),this.open?[2]:(API.loadPageCefBrowser(this.browser,this.path),[4,i.CefLoadHandlerSingleton.getInstance().finishedLoading(this.name)]);case 1:return t.sent(),this.chat||API.setCanOpenChat(!1),this.hud||API.setHudVisible(!1),this.cursor&&API.showCursor(!0),this.setOpen(!0),[2]}})})},e.prototype.destroy=function(){API.destroyCefBrowser(this.browser),this.chat||API.setCanOpenChat(!0),this.hud||API.setHudVisible(!0),this.cursor&&API.showCursor(!1),this.setOpen(!1)},e.prototype.eval=function(e){this.browser.eval(e)},e.prototype.call=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];(r=this.browser).call.apply(r,[e].concat(t));var r},e.prototype.on=function(e,t){this.cefEventHandler.on(this.name+"."+e,t)},e.prototype.add=function(e){this.cefEventHandler.add(e)},e.prototype.remove=function(e){this.cefEventHandler.remove(e)},e.prototype.setExternal=function(e){this.external=e},e.prototype.setHeadless=function(e){this.headless=e,API.setCefBrowserHeadless(this.browser,this.headless)},e.prototype.setCursorVisible=function(e){this.cursor=e},e.prototype.setChatVisible=function(e){this.chat=e},e.prototype.setHudVisible=function(e){this.hud=e},e.prototype.setOpen=function(e){this.open=e},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"EventListener",function(){return r});var r=function(){function e(e,t){this.name=e,this.callback=t}return e.prototype.run=function(e){this.callback(e)},e.prototype.getName=function(){return this.name},e.prototype.getCallback=function(){return this.callback},e}()},function(e,t,n){"use strict";function r(e){for(var t=[],n=0;n<e.Length;n++)t.push(e[n]);return t}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ServerEventHandlerSingleton",function(){return s});var i=n(3),o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(e){function t(){return e.call(this)||this}return o(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}(i.EventHandler);API.onServerEventTrigger.connect(function(e,t){var n=r(t);s.getInstance().trigger(e,n)});var c=API.onResourceStart.connect(function(){API.triggerServerEvent("ready"),c.disconnect()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"EventHandler",function(){return i});var r=n(1),i=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){var n=new r.EventListener(e,t);this.add(n)},e.prototype.add=function(e){this.listeners[e.getName()]||(this.listeners[e.getName()]=new Array),this.listeners[e.getName()].push(e)},e.prototype.remove=function(e){this.listeners[e.getName()].filter(function(t){return t!==e})},e.prototype.trigger=function(e,t){this.listeners[e]&&this.listeners[e].forEach(function(e){e.run(t)})},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"CefEventHandlerSingleton",function(){return o});var r=n(3),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=function(e){function t(){return e.call(this)||this}return i(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}(r.EventHandler);API.onResourceStart.connect(function(){resource.CefEventHandlerSingleton=o.getInstance()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"CefLoadHandlerSingleton",function(){return r});var r=function(){function e(){this.loadingCallbacks={}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.doneLoading=function(e){this.loadingCallbacks[e]()},e.prototype.finishedLoading=function(e){var t=this;return new Promise(function(n){t.loadingCallbacks[e]=n})},e}();API.onResourceStart.connect(function(){resource.CefLoadHandlerSingleton=r.getInstance()})},function(e,t,n){n(0),n(4),n(5),n(7),n(3),n(1),n(2),n(8),n(9),e.exports=n(10)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Debugger",function(){return i});var r=n(0),i=function(){function e(){this.cef=new r.Cef("Debugger","./dist/Debugger.Web/Debugger.html"),this.cef.setHeadless(!1),this.cef.setChatVisible(!0),this.cef.setCursorVisible(!1),this.cef.load(),API.waitUntilCefBrowserLoaded(this.cef.browser),API.sleep(1e3)}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.log=function(e,t){t?this.cef.call("log","["+e+"]",JSON.stringify(t)):this.cef.call("log","["+e+"]","{}")},e.prototype.error=function(e,t){t?this.cef.call("error","["+e+"]",JSON.stringify(t)):this.cef.call("error","["+e+"]","{}")},e.prototype.warn=function(e,t){t?this.cef.call("warn","["+e+"]",JSON.stringify(t)):this.cef.call("warn","["+e+"]","{}")},e}();API.onResourceStart.connect(function(){})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"LoginHandler",function(){return u});var r=n(0),i=n(1),o=n(2),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,c)}u((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,c,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},u=function(){function e(){var e=this;this.cef=new r.Cef("Login","./dist/Login.Web/Login.html"),this.cef.setHudVisible(!1),this.cef.setChatVisible(!1),this.cef.setCursorVisible(!0),this.loginRequestListener=new i.EventListener("loginRequest",this.handleRequest),this.cef.add(this.loginRequestListener),this.loginResponseListener=new i.EventListener("loginResponse",function(t){return e.handleResponse(t)}),o.ServerEventHandlerSingleton.getInstance().add(this.loginResponseListener)}return e.prototype.open=function(e){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.cef.load()];case 1:return e.sent(),[2]}})})},e.prototype.delete=function(){this.cef.remove(this.loginRequestListener),this.cef.destroy(),delete this.cef,delete this.loginRequestListener},e.prototype.handleRequest=function(e){API.triggerServerEvent("loginRequest",JSON.stringify(e))},e.prototype.handleResponse=function(e){try{var t=JSON.parse(e[0]);t.Successfull?this.delete():this.cef.call("invalid",t)}catch(e){}},e}(),a=new i.EventListener("openLogin",function(e){try{var t=JSON.parse(e[0]).username;(new u).open(t)}catch(e){}});o.ServerEventHandlerSingleton.getInstance().add(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"RegisterHandler",function(){return u});var r=n(0),i=n(1),o=n(2),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,c)}u((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,c,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},u=function(){function e(){var e=this;this.cef=new r.Cef("Register","./dist/Login.Web/Register.html"),this.registerRequestListener=new i.EventListener("registerRequest",this.handleRequest),this.cef.add(this.registerRequestListener),this.registerResponseListener=new i.EventListener("registerResponse",function(t){return e.handleResponse(t)}),o.ServerEventHandlerSingleton.getInstance().add(this.registerResponseListener),this.cef.setCursorVisible(!0)}return e.prototype.open=function(){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.cef.load()];case 1:return e.sent(),[2]}})})},e.prototype.delete=function(){this.cef.remove(this.registerRequestListener),o.ServerEventHandlerSingleton.getInstance().remove(this.registerResponseListener),this.cef.destroy(),delete this.cef,delete this.registerRequestListener},e.prototype.handleRequest=function(e){API.triggerServerEvent("registerRequest",JSON.stringify(e))},e.prototype.handleResponse=function(e){try{var t=JSON.parse(e[0]);t.Successfull?this.delete():this.cef.call("invalid",t)}catch(e){}},e}(),a=new i.EventListener("openRegister",function(e){(new u).open()});o.ServerEventHandlerSingleton.getInstance().add(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Notification",function(){return c});var r=n(0),i=n(2),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,c)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,c,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return c={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c},c=function(){function e(t,n,r){e.cefReady&&e.cef.call("notify",t,n,r)}return e.init=function(){return o(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return e.cef=new r.Cef("Notification","./dist/Notification.Web/Notification.html"),e.cef.setHeadless(!1),e.cef.setChatVisible(!0),e.cef.setCursorVisible(!1),[4,this.cef.load()];case 1:return t.sent(),e.cefReady=!0,[2]}})})},e.cefReady=!1,e}();API.onResourceStart.connect(function(){c.init().then(function(){new c("ion-bug","Notifications initialised","red")})}),i.ServerEventHandlerSingleton.getInstance().on("notify",function(e){new c(e[0],e[1],e[2])})}]);